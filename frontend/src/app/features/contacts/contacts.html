<div class="contacts-container" [class.contact-selected]="selectedContact !== null">
  @if (isLoading) {
  <div class="loading-spinner">Loading contacts...</div>
  } @else {
  <app-contact-list [contacts]="contacts" [selectedContact]="selectedContact" (contactSelected)="selectContact($event)"
    (addContactClicked)="openAddModal()">
  </app-contact-list>

  <app-contact-details [selectedContact]="selectedContact" (editClicked)="openAddModal($event)"
    (deleteClicked)="openDeleteModal()" (backClicked)="deselectContact()">
  </app-contact-details>
  }

  <app-contact-form [showModal]="showAddModal" [editMode]="editMode" [contact]="newContact"
    (closeModal)="closeAddModal()" (createContact)="handleCreateContact($event)"
    (saveContact)="handleSaveContact($event)" (deleteFromEdit)="openDeleteModalFromEdit()">
  </app-contact-form>

  @if (showSuccess) {
  <div class="success-toast">
    <img src="assets/sucsess.png" alt="Success" />
  </div>
  }

  @if (showDeleteModal) {
  <div class="modal-overlay">
    <div class="modal delete-modal">
      <div class="delete-modal-header">
        <h3>Delete contact</h3>
      </div>
      <div class="delete-modal-content">
        <p>
          Do you really want to delete the contact:<br>
          <strong>{{ selectedContact?.firstname }} {{ selectedContact?.lastname }}</strong>
        </p>
        <div class="modal-actions">
          <button type="button" class="secondary" (click)="closeDeleteModal()">Cancel</button>
          <button type="button" class="primary danger" (click)="confirmDelete()">Delete</button>
        </div>
      </div>
    </div>
  </div>
  }
</div>