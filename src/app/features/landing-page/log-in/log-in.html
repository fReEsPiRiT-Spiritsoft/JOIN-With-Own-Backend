@if (showWelcome) {
<div class="welcome-overlay" [class.fade-out]="!showWelcome">
    <app-header></app-header>
    <div class="welcome-content">
        <div class="welcome-logo">
        </div>
        <div class="welcome-text">
            <h2 class="welcome-greeting">Good {{ timeOfDay }},</h2>
            <h1 class="welcome-name">{{ welcomeUserName }}</h1>
        </div>
    </div>
</div>
}

<!-- Sign Up Button rechts oben (Desktop/Tablet) -->
<div class="header-actions">
    <span class="not-user-text">Not a Join user?</span>
    <button type="button" class="signup-btn" (click)="navigateToSignUp()">Sign up</button>
</div>

<div class="login-container">
    <!-- Login Card -->
    <div class="login-card">
        <h1>Log in</h1>
        <div class="underline"></div>

        <form class="login-form" #loginForm="ngForm">
            <!-- Email Input -->
            <div class="input-group">
                <input type="email" [(ngModel)]="email" name="email" placeholder="Email" class="form-input"
                    [class.error]="emailError" #emailInput="ngModel" required email (blur)="validateEmail()"
                    (input)="onEmailInput()" />
                <img src="assets/signup/mail-signup.png" alt="Email" class="input-icon" />


                <div class="error-message">
                    @if (emailError) {
                    <span>{{ emailError }}</span>
                    }
                </div>
            </div>

            <div class="input-group">
                <input type="password" [(ngModel)]="password" name="password" placeholder="Password" class="form-input"
                    [class.error]="passwordError" required (keydown)="onPasswordKeydown($event)"
                    (blur)="onPasswordBlur()" (input)="onPasswordInput()" />
                <img src="assets/signup/lock-signup.png" alt="Password" class="input-icon" />


                <div class="error-message">
                    @if (capsLockOn && !passwordError) {
                    <span class="warning-message"> Caps Lock is on</span>
                    }
                    @if (passwordError) {
                    <span>{{ passwordError }}</span>
                    }
                </div>
            </div>

            @if (errorMessage) {
            <div class="general-error">
                {{ errorMessage }}
            </div>
            <div class="general-error">
                {{ errorMessage }}
            </div>
            }

            <!-- Buttons -->
            <div class="button-group">
                <button type="button" class="btn-primary" (click)="onLogin()" [disabled]="isLoading">
                    @if (isLoading) {
                    <span>Logging in...</span>
                    } @else {
                    <span>Log in</span>
                    }
                </button>
                <button type="button" class="btn-secondary" (click)="onGuestLogin()" [disabled]="isLoading">
                    Guest Log in
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Sign Up Button unter der Card (Mobile) -->
<div class="header-actions-mobile">
    <span class="not-user-text">Not a Join user?</span>
    <button type="button" class="signup-btn" (click)="navigateToSignUp()">Sign up</button>
</div>